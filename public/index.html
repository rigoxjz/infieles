<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro Nacional de Infieles</title>
    <style>
        :root{
            --azul:#007bff;--rojo:#dc3545;--naranja:#fd7e14;--fondo:#f8f9fa;--blanco:#fff;--gris:#6c757d;--texto:#212529;
            --dark-bg:#0f172a;--dark-text:#e5e7eb;--dark-muted:#cbd5f5;--dark-highlight:#fbbf24;--dark-danger:#f97373;
        }
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:system-ui,Arial,sans-serif;background:var(--fondo);color:var(--texto);max-width:500px;margin:0 auto;min-height:100vh}
        #solo-pc{display:none;text-align:center;padding:60px;background:#fff;min-height:100vh;font-size:1.3em}
        @media(min-width:768px){body>*:not(#solo-pc){display:none}#solo-pc{display:block}}
        header{text-align:center;padding:35px 15px;background:var(--blanco);border-bottom:5px solid var(--azul);box-shadow:0 3px 10px rgba(0,123,255,.15)}
        h1{font-size:2.1em;color:var(--azul)}
        .btn{padding:15px 20px;font-size:1.05em;border:none;border-radius:10px;cursor:pointer;font-weight:bold;margin:12px 10px;width:88%}
        .btn-azul{background:var(--azul);color:white}
        .btn-rojo{background:var(--rojo);color:white}
        #search-section{padding:25px 15px;background:var(--blanco);text-align:center}
        #search-input{width:94%;padding:16px;border:2px solid #ced4da;border-radius:30px;font-size:1.1em;text-align:center}
        #lista-infieles{padding:10px;display:flex;flex-direction:column;gap:18px}
        .card{background:var(--blanco);border-radius:14px;overflow:hidden;box-shadow:0 4px 18px rgba(0,0,0,.1);border:1px solid #e9ecef}
        .card-header{background:var(--azul);color:white;padding:18px;text-align:center;font-size:1.25em;font-weight:bold}
        .card-body{padding:18px}
        .info{margin:10px 0;color:var(--gris)}
        .info strong{color:var(--texto)}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1000;justify-content:center;align-items:center;padding:15px}
        .modal.active{display:flex}
        .modal-content{background:white;border-radius:14px;padding:25px;width:100%;max-height:92vh;overflow-y:auto;position:relative}
        .close{position:absolute;top:10px;right:15px;font-size:32px;cursor:pointer;color:#999}

        /* ESTILO PARA LOS DOS MODALES LEGALES (OSCURO Y MODERNO) */
        #modal-aviso-legal .modal-content,
        #modal-legal .modal-content{
            background:var(--dark-bg);color:var(--dark-text);border:1px solid rgba(148,163,184,0.3);box-shadow:0 20px 40px rgba(15,23,42,0.7);
        }
        #modal-aviso-legal h1,#modal-legal h2{font-size:1.8rem;color:#f9fafb;text-align:center}
        #modal-aviso-legal h2,#modal-legal h3{font-size:1.3rem;margin:24px 0 8px;color:var(--dark-text);font-weight:600}
        #modal-aviso-legal p,#modal-legal p{font-size:0.95rem;color:var(--dark-muted);margin:8px 0;line-height:1.8}
        #modal-aviso-legal ul,#modal-legal ul,#modal-aviso-legal ol,#modal-legal ol{padding-left:25px;margin:15px 0}
        #modal-aviso-legal li,#modal-legal li{font-size:0.95rem;color:var(--dark-muted);margin:4px 0}
        #modal-aviso-legal .highlight,#modal-legal .highlight{color:var(--dark-highlight);font-weight:600}
        #modal-aviso-legal .danger,#modal-legal .danger{color:var(--dark-danger);font-weight:600}
        #modal-aviso-legal .checkbox-area{display:flex;align-items:center;justify-content:center;gap:12px;margin:20px 0;flex-wrap:wrap}
        #modal-aviso-legal .checkbox-area input{margin:0}
        #modal-aviso-legal .error-msg{color:#fecaca;font-size:0.9rem;margin-top:8px;display:none;text-align:center;width:100%}
        #modal-aviso-legal .error-msg.visible{display:block}
        #modal-aviso-legal .notice{font-size:0.8rem;color:#9ca3af;margin-top:20px;text-align:center}
        #modal-aviso-legal .notice strong{color:var(--dark-text)}

        /* ESTILOS ADICIONALES */
        .galeria img,.comentario img{width:100%!important;height:auto!important;border-radius:10px;margin:12px 0;display:block;box-shadow:0 2px 10px rgba(0,0,0,.15)}
        label{display:block;margin:18px 0 8px;font-weight:bold}
        input,textarea{width:100%;padding:14px;border:1.5px solid #ddd;border-radius:10px;font-size:1em}
        textarea{min-height:120px}
        .votos{display:flex;gap:10px;margin:25px 0}
        .voto-btn{flex:1;padding:14px;border-radius:10px;color:white;border:none;font-weight:bold}
        .comentarios{margin-top:30px;border-top:2px solid #eee;padding-top:20px}
        .comentario{background:#f8f9fa;padding:15px;border-radius:10px;margin:15px 0;border-left:4px solid var(--azul)}
        .importante{color:var(--naranja);font-weight:bold}
        .rojo{color:var(--rojo);font-weight:bold}
    </style>
</head>
<body>

<div id="solo-pc">
    <h2>Este sitio es solo para celulares</h2>
    <p>Abre desde tu teléfono</p>
</div>

<!-- MODAL AVISO LEGAL INICIAL (EL CORTO QUE APARECE AL ENTRAR) -->
<div id="modal-aviso-legal" class="modal active">
    <div class="modal-content">
        <h1>AVISO LEGAL · TÉRMINOS DE USO</h1>
        <div style="margin-top:20px;max-height:65vh;overflow-y:auto">
            <p><strong>Aviso Legal, Responsabilidad y Uso de la Plataforma</strong></p>
            <p>Este documento describe los Términos y Condiciones de Uso de la plataforma. Al utilizar el sitio, el usuario declara que ha leído, entendido y aceptado íntegramente lo aquí establecido.</p>
            <h2>1. Naturaleza del contenido</h2>
            <p>La plataforma permite a los usuarios registrar y publicar información bajo su exclusiva iniciativa. <span class="highlight">El titular del sitio no crea, edita, verifica ni garantiza la veracidad de la información ingresada por terceros.</span></p>
            <p class="danger">El contenido publicado por los usuarios no debe:</p>
            <ul>
                <li>Vulnerar la privacidad, el honor, la imagen o la reputación de personas o entidades.</li>
                <li>Contener datos personales sin el consentimiento correspondiente.</li>
                <li>Constituir difamación, calumnia, amenazas, acoso o daño a terceros.</li>
                <li>Infringir leyes sobre protección de datos, derechos de autor u otras normas aplicables.</li>
            </ul>
            <h2>2. Responsabilidad del usuario</h2>
            <p class="danger">Cada usuario es el único y exclusivo responsable de la información que publica.</p>
            <p>Declara que la información es lícita y asume todas las consecuencias legales derivadas de su uso.</p>
            <h2>3. Limitación de responsabilidad del titular</h2>
            <p>El titular no se responsabiliza por la veracidad del contenido ni por daños derivados de su uso. Se reserva el derecho de eliminar contenidos inapropiados.</p>
            <p class="danger">Está estrictamente prohibido usar la plataforma para acosar, difamar o dañar a terceros.</p>
            <h2>4. Uso adecuado</h2>
            <p class="danger">El usuario se compromete a respetar la dignidad de las personas y no usar la plataforma para venganza o acoso.</p>
            <h2>5. No asesoría legal</h2>
            <p>El contenido es general y no constituye asesoría legal.</p>
            <div style="background:rgba(30,41,59,0.8);padding:20px;border-radius:12px;margin:30px 0;border-left:5px solid var(--dark-danger)">
                <p style="color:#fff;font-size:1.1em;font-weight:600">
                    Declaro que he leído y acepto los Términos de Uso y el Aviso Legal, y que no usaré el sitio para vulnerar derechos de terceros.
                </p>
            </div>
        </div>
        <div class="checkbox-area">
            <input type="checkbox" id="acceptTerms">
            <label for="acceptTerms">He leído y acepto los términos anteriores</label>
        </div>
        <div id="errorMsg" class="error-msg">Debes aceptar los términos para continuar.</div>
        <div style="margin-top:25px;display:flex;flex-direction:column;gap:15px">
            <button id="btn-aceptar-legal" class="btn btn-azul" style="font-size:1.1em;padding:16px">Continuar al sitio</button>
            <button id="btn-salir-legal" class="btn btn-rojo" style="font-size:1.1em;padding:16px">Salir de la página</button>
        </div>
        <p class="notice">
            <strong>Importante:</strong> El titular puede actualizar estos términos en cualquier momento. El uso continuado implica aceptación de la versión vigente.
        </p>
    </div>
</div>

<!-- MODAL LEGAL DETALLADO (SE ABRE CON EL BOTÓN ROJO DEL HEADER) -->
<div id="modal-legal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarLegal()">×</span>
        <h2>⚖️ Términos y Condiciones</h2>
        <div style="padding:30px;padding-top:0;max-height:70vh;overflow-y:auto">
            <div style="margin-bottom:30px">
                <h3>1. Naturaleza y funcionamiento del sitio (Intermediario – Safe Harbor)</h3>
                <p>Esta plataforma funciona como un espacio de publicaciones anónimas creadas directamente por los usuarios, sin registro obligatorio, sin verificación de identidad y sin recopilación de datos reales.</p>
                <p>No realizamos moderación previa ni edición del contenido; las publicaciones aparecen automáticamente al ser enviadas por los usuarios.</p>
                <p>Este funcionamiento es el que define legalmente a la plataforma como un intermediario neutral, exactamente igual que foros, tablones abiertos y sistemas de mensajes anónimos como TuSecreto.com en su momento.</p>
            </div>
            <div style="margin-bottom:30px">
                <h3>2. Responsabilidad sobre el contenido (el autor, no la plataforma)</h3>
                <p>Todo el contenido del sitio es generado por usuarios anónimos.</p>
                <p>La ley establece que:</p>
                <p style="padding-left:20px;font-style:italic">"El responsable del contenido es quien lo publica."</p>
                <p>Tal como ocurre en redes sociales, blogs o foros, la plataforma no participa en la creación del mensaje, ni lo revisa antes, ni lo aprueba. Por tanto, no puede ser considerada autora ni coautora.</p>
                <p>Esto fue precisamente el principio que permitió a plataformas anónimas operar durante años: la responsabilidad recae exclusivamente en el usuario que escribe, no en el intermediario que ofrece el espacio.</p>
            </div>
            <div style="margin-bottom:30px">
                <h3>3. Datos personales y privacidad</h3>
                <p>La plataforma no recopila, almacena ni procesa información personal identificable.</p>
                <p>No tenemos:</p>
                <ul>
                    <li>nombres reales</li>
                    <li>direcciones</li>
                    <li>teléfonos</li>
                    <li>documentos</li>
                    <li>IP vinculadas a identidades</li>
                    <li>registros que permitan identificar al autor</li>
                </ul>
                <p><strong style="color:#d84315">Sobre coordenadas de ubicación:</strong> La plataforma solicita acceso a tu ubicación geográfica únicamente con fines de seguridad y prevención de abusos. Estas coordenadas se utilizan exclusivamente para detectar y bloquear intentos maliciosos y se eliminan automáticamente después de su uso. No se almacenan de forma permanente ni se vinculan con tu identidad. Tu privacidad está protegida.</p>
                <p>Esto significa que no existe un tratamiento de datos personales, condición esencial para que a la plataforma no se le pueda atribuir responsabilidad por información que un usuario decida escribir por cuenta propia.</p>
            </div>
            <div style="margin-bottom:30px">
                <h3>4. Sobre menciones, nombres o enlaces compartidos por usuarios</h3>
                <p>Si un usuario decide escribir un nombre, una percepción o una anécdota, eso es una acción individual del autor de la publicación.</p>
                <p>La plataforma:</p>
                <ul>
                    <li>no verifica su autenticidad,</li>
                    <li>no puede editar o corregir intenciones del usuario,</li>
                    <li>no puede identificar quién lo escribió.</li>
                </ul>
                <p>Este principio fue utilizado durante años por sitios de anonimato: el intermediario no es responsable por lo que terceros deciden compartir mientras se ofrezca un mecanismo de reporte y retiro.</p>
            </div>
            <div style="margin-bottom:30px">
                <h3>5. Difamación y conflictos entre particulares</h3>
                <p>Las leyes de difamación se aplican entre las personas involucradas, no contra la plataforma.</p>
                <p>El sitio no emite juicios, no publica contenido propio y no respalda afirmaciones de terceros.</p>
                <p>Solo aloja mensajes enviados automáticamente por usuarios.</p>
                <p>Este es el mismo criterio que permitió a plataformas anónimas y foros sobrevivir legalmente: el reclamo debe dirigirse al autor, no al intermediario que solo ofrece el espacio de publicación.</p>
            </div>
            <div style="margin-bottom:30px">
                <h3>6. Eliminación de contenido (retirada bajo aviso)</h3>
                <p>Aunque no moderamos contenido de manera previa —para mantener el estatus legal de intermediario neutral— sí contamos con un mecanismo de buena fe para colaborar cuando haya reportes.</p>
                <p style="font-weight:600">¿Cómo funciona?</p>
                <ol>
                    <li>Cualquier persona puede denunciar una publicación.</li>
                    <li>Al recibir el enlace, revisamos si contiene información privada sensible.</li>
                    <li>Si infringe nuestras normas internas, la eliminamos.</li>
                    <li>Si no infringe las normas, explicamos claramente la razón.</li>
                </ol>
            </div>
            <div style="margin-bottom:30px">
                <h3>7. Derecho al retiro / olvido dentro del sistema</h3>
                <p>Puedes solicitar que revisemos un contenido enviando el enlace exacto de la publicación.</p>
                <p>Al no tener capacidad técnica de identificar al autor, solo podemos actuar sobre el texto ya publicado, no sobre usuarios inexistentes o datos que no recopilamos.</p>
            </div>
            <div style="background:rgba(30,41,59,0.8);padding:25px;border-radius:10px;border-left:5px solid var(--dark-danger);margin-top:30px">
                <h3 style="color:var(--dark-highlight)">Conclusión</h3>
                <p>Comprendemos la preocupación y estamos aquí para ayudar dentro de nuestras posibilidades.</p>
                <p>Sin embargo, conforme a la legislación vigente y al funcionamiento técnico del sitio:</p>
                <ul>
                    <li>No somos autores del contenido.</li>
                    <li>No procesamos datos personales.</li>
                    <li>No identificamos ni podemos identificar al usuario que publicó algo.</li>
                    <li>La responsabilidad pertenece únicamente al autor anónimo.</li>
                    <li>Podemos retirar contenido cuando se nos informe y si infringe las reglas.</li>
                </ul>
            </div>
            <div style="margin-top:25px;padding-top:20px;border-top:2px solid #eee">
                <p style="font-size:0.85rem;text-align:center">
                    <strong>Nota Legal:</strong> Estos términos y condiciones están basados en el marco legal de intermediarios neutrales (Safe Harbor) y la legislación vigente sobre protección de datos personales. Cada caso debe ser evaluado individualmente según la jurisdicción aplicable.
                </p>
            </div>
        </div>
        <button class="btn btn-rojo" onclick="cerrarLegal()" style="margin-top:20px;font-size:1.1em;padding:16px">Entendido</button>
    </div>
</div>

<!-- MODAL EDAD -->
<div id="age-modal" class="modal">
    <div class="modal-content">
        <h2>Confirmación de Edad</h2>
        <p>Este contenido es solo para mayores de 18 años</p>
        <button id="btn-si-edad" class="btn btn-azul">Sí, tengo 18+</button>
        <button id="btn-no-edad" class="btn btn-rojo">No</button>
    </div>
</div>

<div id="main-content" style="display:none;">
    <header>
        <h1>Registro de Infieles</h1>
        <p>El chisme que todos quieren ver</p>
        <button class="btn btn-azul" id="btn-agregar">+ Exponer Infiel</button>
        <button class="btn btn-rojo" id="btn-legal">Información Legal Importante</button>
    </header>
    <section id="search-section">
        <input type="text" id="search-input" placeholder="Buscar por nombre o ciudad...">
    </section>
    <div id="lista-infieles"></div>
</div>

<!-- Modal formulario y detalle chisme (sin cambios) -->
<div id="modal-form" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarModal()">×</span>
        <h2>Nuevo Chisme</h2>
        <form id="form-infiel">
            <label>Tu nick (opcional - si no pones, serás Anónimo)</label>
            <input type="text" id="reportero">
            <label>Nombre del infiel</label>
            <input type="text" id="nombre" required>
            <label>Apellido</label>
            <input type="text" id="apellido" required>
            <label>Edad</label>
            <input type="number" id="edad" min="18" required>
            <label>De dónde es</label>
            <input type="text" id="ubicacion" required>
            <label>Todo el chisme (detalles completos)</label>
            <textarea id="historia" required></textarea>
            <label>Pruebas (fotos)</label>
            <input type="file" id="pruebas" accept="image/*" multiple>
            <button type="submit" class="btn btn-azul" style="margin-top:20px">Publicar Chisme</button>
        </form>
    </div>
</div>

<div id="modal-chisme" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarDetalle()">×</span>
        <div id="detalle-chisme"></div>

    </div>
</div>

<script src="script.js"></script>
<script>
    // Elementos
    const modalAvisoInicial = document.getElementById("modal-aviso-legal");
    const modalLegalDetalle = document.getElementById("modal-legal");
    const ageModal = document.getElementById("age-modal");
    const acceptCheckbox = document.getElementById("acceptTerms");
    const btnAceptar = document.getElementById("btn-aceptar-legal");
    const btnSalir = document.getElementById("btn-salir-legal");
    const btnLegalHeader = document.getElementById("btn-legal");
    const errorMsg = document.getElementById("errorMsg");

    // Abrir modal legal detallado desde el botón del header
    btnLegalHeader.addEventListener("click", () => {
        modalLegalDetalle.classList.add("active");
    });

    // Cerrar modal legal detallado
    window.cerrarLegal = function() {
        modalLegalDetalle.classList.remove("active");
    };

    // Lógica del modal inicial
    btnAceptar.addEventListener("click", () => {
        if (!acceptCheckbox.checked) {
            errorMsg.classList.add("visible");
            return;
        }
        localStorage.setItem("acepto_legal", "1");
        modalAvisoInicial.classList.remove("active");
        ageModal.classList.add("active");
    });

    btnSalir.addEventListener("click", () => {
        window.location.href = "https://google.com";
    });

    // Al cargar: si ya aceptó, salta el inicial
    if (localStorage.getItem("acepto_legal")) {
        modalAvisoInicial.classList.remove("active");
        ageModal.classList.add("active");
    }
</script>
</body>
</html>
